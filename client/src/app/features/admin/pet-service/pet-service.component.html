<div class="h-screen mx-auto p-6">
  <div class="grid grid-cols-1 xl:grid-cols-[3fr_1fr] gap-6 h-full">
    <!-- Left Section: Form + Table -->
    <div class="h-fit">
      <!-- Page Title -->
      <p class="text-3xl font-bold mb-6">Service Record</p>

      <!-- Toggle Button -->
      <div class="mb-4">
        <button
          class="bg-[var(--primary)] text-white px-4 py-2 rounded-lg hover:bg-[var(--secondary)] transition"
          (click)="toggleForm()"
        >
          {{ showForm ? 'Hide & Reset Form' : 'Show Service Form' }}
        </button>
      </div>

      <!-- Service Form -->
      @if (showForm) {
        <form
          [formGroup]="form"
          (ngSubmit)="onSubmit()"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 bg-white p-6 rounded-xl shadow-md mb-8"
        >
          <!-- Pet ID -->
      <div>
        <label for="petId" class="block font-semibold mb-2">Pet ID</label>
        <input
          type="text"
          id="petId"
          formControlName="petId"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Owner ID -->
      <div>
        <label for="ownerId" class="block font-semibold mb-2">Owner ID</label>
        <input
          type="text"
          id="ownerId"
          formControlName="ownerId"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Service Dropdown -->
      <div>
        <label for="service" class="block font-semibold mb-2">Service</label>
        <select
          id="service"
          formControlName="serviceId"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option>Select Service</option>
          @for (service of serviceList; track service.id) {
            <option [value]="service.id">{{ service.name }}</option>
          }
        </select>
        <a class="items-end">Create service</a>
      </div>

      <!-- Date Picker -->
      <div>
        <label for="date" class="block font-semibold mb-2">Date of Service</label>
        <input
          type="date"
          id="date"
          formControlName="dateOfService"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Notes -->
      <div class="md:col-span-2 lg:col-span-3">
        <label for="notes" class="block font-semibold mb-2">Notes</label>
        <textarea
          id="notes"
          formControlName="notes"
          rows="3"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        ></textarea>
      </div>

      <!-- Visit Type -->
      <div>
        <label for="visitType" class="block font-semibold mb-2">Visit Type</label>
        <select
          id="visitType"
          formControlName="visitType"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option value="0">Appointment</option>
          <option value="1">Walk-in</option>
        </select>
      </div>

      <!-- Appointment ID -->
      <div>
        <label for="appointmentId" class="block font-semibold mb-2">Appointment ID (Optional)</label>
        <input
          type="text"
          id="appointmentId"
          formControlName="appointmentId"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <!-- Submit Button -->
      <div class="content-end">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="form.invalid"
        >
          Record Service
        </button>
      </div>
        </form>
      }

      <!-- Service Table -->
      <div class="bg-white p-6 rounded-xl shadow-md overflow-x-auto">
        <table class="min-w-full table-auto">
          <thead>
            <tr class="bg-gray-100 text-left text-sm font-semibold text-gray-700">
              <th class="px-4 py-3">ID</th>
              <th class="px-4 py-3">Pet Name</th>
              <th class="px-4 py-3">Service</th>
              <th class="px-4 py-3">Appointment Date</th>
              <th class="px-4 py-3">Status</th>
            </tr>
          </thead>
          <tbody class="text-sm text-gray-600">
            @for (record of records; track record.id) {
              <tr
                routerLink="/admin/pet-service/{{ record.id }}"
                class="border-b hover:bg-[var(--primary)] hover:text-[var(--white)]"
              >
                <td class="px-4 py-3">{{ record.id }}</td>
                <td class="px-4 py-3">{{ record.petName }}</td>
                <td class="px-4 py-3">{{ record.serviceName }}</td>
                <td class="px-4 py-3">{{ record.dateOfService | date }}</td>
                <td class="px-4 py-3">{{ record.status }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <!-- Right Section: Calendar -->
    <div class="bg-white rounded-xl shadow-md p-6 h-fit">
      <h3 class="text-xl font-semibold mb-4 text-center">ðŸ“… Calendar</h3>
      <mat-calendar [(selected)]="selectedDate" (selectedChange)="onDateChange($event)"></mat-calendar>
    </div>
  </div>
</div>